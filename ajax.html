<!DOCTYPE html>
<html lang="en">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    function getAllClass() {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/api/classes",
            success: function(thh) {
                console.log(thh)
                displayName(thh)
            }
        })
    }

    function displayName(array) {
        let res = "";
        for(let i = 0; i < array.length; i++) {
            res += array[i].name + "<br>";
        }
        document.getElementById("display").innerHTML = res;
    }

    function getAllStudent() {
        $.ajax({
            type: "GET",
            url: "http://localhost:8080/api/students",
            success: function(thh) {
                console.log(thh)
                displayName(thh.content)
            }
        })
    }

    function showFormAdd() {
        let form = '<input type="text" id="name">\n' +
            '<input type="text" id="score">\n' +
            '<input type="text" id="age">\n' +
            '<input type="text" id="clazz">\n' +
            '<button onclick="saveStudent()">Thêm</button>';
        document.getElementById("display").innerHTML = form;
    }

    function saveStudent() {
        let name = document.getElementById("name").value;
        let score = document.getElementById("score").value;
        let age = document.getElementById("age").value;
        let clazz = document.getElementById("clazz").value;
        let thh = {
            name: name,
            score: score,
            age: age,
            clazz: {
                id: clazz
            }
        }
        console.log(thh);
        $.ajax({
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            type: 'POST',
            url: 'http://localhost:8080/api/students',
            data: JSON.stringify(thh),
            success: getAllStudent,
            error: function(error) {
                console.log(error)
            }
        })
    }
</script>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body onload="getAllClass()">
<button onclick="getAllClass()">Hiển thị danh sách lớp</button>
<button onclick="getAllStudent()">Hiển thị danh sách học sinh</button>
<button onclick="showFormAdd()">Thêm mới</button>
<button onclick="saveStudent()"></button>


<div id="display">

</div>
</body>
</html>